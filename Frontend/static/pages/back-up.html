<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/back-up.css">
     <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <script>
      // Check if user is logged in
      if (
        !localStorage.getItem("loggedIn") ||
        localStorage.getItem("loggedIn") !== "true"
      ) {
        // Redirect to login page if not logged in
        window.location.href = "login.html";
      }
    </script>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-boxes"></i>
          </div>
          <div class="logo-text">InventoryPro</div>
        </div>
        <button class="toggle-btn" id="sidebarToggle">
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>

      <div class="sidebar-menu">
        <a href="./dashboard.html" class="menu-item active">
          <i class="fas fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </a>

        <a href="./update-category.html" class="menu-item">
          <i class="fas fa-box-open"></i>
          <span>Product Management</span>
        </a>

        <a href="./stockmanagement.html" class="menu-item">
          <i class="fas fa-warehouse"></i>
          <span>Stock Management</span>
        </a>

        <a href="./sale.html" class="menu-item">
          <i class="fas fa-chart-line"></i>
          <span>Sales Management</span>
        </a>

        <a href="./category-management.html" class="menu-item">
          <i class="fas fa-tags"></i>
          <span>Category Management</span>
        </a>

        <a href="./supplier.html" class="menu-item">
          <i class="fas fa-truck"></i>
          <span>Supplier Management</span>
        </a>

        <a href="./purchase.html" class="menu-item">
          <i class="fas fa-shopping-cart"></i>
          <span>Purchase Management</span>
        </a>

        <a href="./detailed-analytics.html" class="menu-item">
          <i class="fas fa-chart-bar"></i>
          <span>Analytics & Forecasts</span>
        </a>

        <a href="./back-up.html" class="menu-item">
          <i class="fas fa-database"></i>
          <span>Backup & Export</span>
        </a>

        <a href="./barcode.html" class="menu-item">
          <i class="fas fa-barcode"></i>
          <span>Barcode Scanner</span>
        </a>

        <a href="./tansition-history.html" class="menu-item">
          <i class="fas fa-history"></i>
          <span>Transaction History</span>
        </a>

        <a href="./user-management.html" class="menu-item">
          <i class="fas fa-chart-line"></i>
          <span>User management</span>
        </a>

        <div class="sidebar-footer" style="padding: 20px; margin-top: auto">
          <div class="menu-item" id="logoutSidebar">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
      <!-- Header -->
      <div class="header">
        <div class="header-left">
          <button class="mobile-menu-toggle" id="mobileMenuToggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1 id="pageTitle">Backup & Export</h1>
        </div>

        <div class="header-right">
          <div class="user-profile">
            <div class="user-avatar" id="userAvatar">A</div>
            <button class="logout-btn" id="logoutBtn">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="content">
        <!-- Page Header -->
        <div class="page-header">
          <div>
            <h1 class="page-title">Backup & Export</h1>
            <p class="page-subtitle">
              Secure your data with backups and export in multiple formats
            </p>
          </div>
          <div class="action-buttons">
            <button class="btn btn-primary" id="quickBackupBtn">
              <i class="fas fa-bolt"></i> Quick Backup
            </button>
            <button class="btn btn-success" id="exportNowBtn">
              <i class="fas fa-file-export"></i> Export Now
            </button>
          </div>
        </div>

        <!-- Storage Overview -->
        <div class="storage-overview">
          <div class="storage-card">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-database"></i>
              </div>
              <div class="storage-value">2.8 GB / 10 GB</div>
            </div>
            <div class="card-title">Database Storage</div>
            <div class="card-subtitle">Total inventory data storage usage</div>
            <div class="storage-bar">
              <div class="storage-fill good" style="width: 28%"></div>
            </div>
            <div class="storage-info">
              <span>28% used</span>
              <span>7.2 GB free</span>
            </div>
          </div>

          <div class="storage-card success">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-hdd"></i>
              </div>
              <div class="storage-value">15.4 GB / 50 GB</div>
            </div>
            <div class="card-title">Backup Storage</div>
            <div class="card-subtitle">Backup files and archives storage</div>
            <div class="storage-bar">
              <div class="storage-fill warning" style="width: 31%"></div>
            </div>
            <div class="storage-info">
              <span>31% used</span>
              <span>34.6 GB free</span>
            </div>
          </div>

          <div class="storage-card warning">
            <div class="card-header">
              <div class="card-icon">
                <i class="fas fa-cloud"></i>
              </div>
              <div class="storage-value">Last: 2 hours ago</div>
            </div>
            <div class="card-title">Last Backup</div>
            <div class="card-subtitle">Most recent successful backup</div>
            <div class="storage-bar">
              <div class="storage-fill good" style="width: 100%"></div>
            </div>
            <div class="storage-info">
              <span
                >Status:
                <strong style="color: var(--success-color)"
                  >Completed</strong
                ></span
              >
              <span>Size: 245 MB</span>
            </div>
          </div>
        </div>

        <!-- Backup Options -->
        <div class="backup-options">
          <div class="option-card">
            <div class="option-header">
              <div class="option-icon">
                <i class="fas fa-database"></i>
              </div>
              <div>
                <div class="option-title">Full Database Backup</div>
                <div class="card-subtitle">
                  Complete backup of all system data
                </div>
              </div>
            </div>
            <div class="option-description">
              Create a complete backup of your entire inventory database
              including products, sales, customers, and system settings.
            </div>
            <div class="option-features">
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Includes all tables and records</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Compressed for storage efficiency</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Encrypted for security</span>
              </div>
            </div>
            <button class="btn btn-primary" id="fullBackupBtn">
              <i class="fas fa-save"></i> Create Full Backup
            </button>
          </div>

          <div class="option-card">
            <div class="option-header">
              <div class="option-icon">
                <i class="fas fa-cloud-upload-alt"></i>
              </div>
              <div>
                <div class="option-title">Cloud Backup</div>
                <div class="card-subtitle">
                  Automatic backup to cloud storage
                </div>
              </div>
            </div>
            <div class="option-description">
              Automatically backup your data to secure cloud storage. Set up
              schedules and let the system handle the rest.
            </div>
            <div class="option-features">
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Automatic scheduled backups</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Secure cloud storage</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-check-circle"></i>
                <span>Version history retention</span>
              </div>
            </div>
            <button class="btn btn-outline" id="setupCloudBackupBtn">
              <i class="fas fa-cog"></i> Setup Cloud Backup
            </button>
          </div>
        </div>

        <!-- Export Options -->
        <div class="export-options">
          <div class="section-header">
            <h3 class="section-title">
              <i class="fas fa-file-export"></i> Export Data
            </h3>
            <div class="action-buttons">
              <button class="btn btn-outline" id="selectAllBtn">
                <i class="fas fa-check-square"></i> Select All
              </button>
            </div>
          </div>

          <div class="export-types">
            <div class="export-type" data-format="csv">
              <div class="type-icon">
                <i class="fas fa-file-csv"></i>
              </div>
              <div class="type-name">CSV Format</div>
              <div class="type-desc">Comma separated values</div>
            </div>

            <div class="export-type selected" data-format="excel">
              <div class="type-icon">
                <i class="fas fa-file-excel"></i>
              </div>
              <div class="type-name">Excel Format</div>
              <div class="type-desc">Microsoft Excel files</div>
            </div>

            <div class="export-type" data-format="pdf">
              <div class="type-icon">
                <i class="fas fa-file-pdf"></i>
              </div>
              <div class="type-name">PDF Format</div>
              <div class="type-desc">Portable document format</div>
            </div>

            <div class="export-type" data-format="json">
              <div class="type-icon">
                <i class="fas fa-file-code"></i>
              </div>
              <div class="type-name">JSON Format</div>
              <div class="type-desc">JavaScript Object Notation</div>
            </div>
          </div>

          <div class="data-selection">
            <div class="selection-header">
              <div class="selection-title">Select Data to Export</div>
              <div class="select-all">
                <input type="checkbox" id="selectAllData" />
                <label for="selectAllData">Select All Data</label>
              </div>
            </div>

            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Data Type</th>
                    <th>Records</th>
                    <th>Last Updated</th>
                    <th>Size</th>
                    <th>Select</th>
                  </tr>
                </thead>
                <tbody id="exportDataTable">
                  <!-- Data will be populated by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn" id="cancelExportBtn">Cancel</button>
            <button class="btn btn-success" id="startExportBtn">
              <i class="fas fa-download"></i> Start Export
            </button>
          </div>
        </div>

        <!-- Backup History -->
        <div class="backup-history">
          <div class="section-header">
            <h3 class="section-title">
              <i class="fas fa-history"></i> Backup History
            </h3>
            <button class="btn btn-outline" id="refreshBackupsBtn">
              <i class="fas fa-sync-alt"></i> Refresh
            </button>
          </div>

          <div class="history-table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Backup Name</th>
                  <th>Date & Time</th>
                  <th>Type</th>
                  <th>Size</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="backupHistoryTable">
                <!-- Backup history will be populated by JavaScript -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Schedule Backup -->
        <div class="schedule-backup">
          <div class="section-header">
            <h3 class="section-title">
              <i class="fas fa-clock"></i> Schedule Automatic Backup
            </h3>
          </div>

          <form id="scheduleForm">
            <div class="form-row">
              <div class="form-group">
                <label for="backupFrequency">Backup Frequency</label>
                <select id="backupFrequency" class="form-control">
                  <option value="daily">Daily</option>
                  <option value="weekly" selected>Weekly</option>
                  <option value="monthly">Monthly</option>
                  <option value="custom">Custom</option>
                </select>
              </div>

              <div class="form-group">
                <label for="backupTime">Time of Day</label>
                <select id="backupTime" class="form-control">
                  <option value="00:00">12:00 AM</option>
                  <option value="01:00">1:00 AM</option>
                  <option value="02:00" selected>2:00 AM</option>
                  <option value="03:00">3:00 AM</option>
                  <option value="04:00">4:00 AM</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="backupType">Backup Type</label>
                <select id="backupType" class="form-control">
                  <option value="full">Full Database</option>
                  <option value="incremental" selected>Incremental</option>
                  <option value="differential">Differential</option>
                </select>
              </div>

              <div class="form-group">
                <label for="retentionPeriod">Retention Period</label>
                <select id="retentionPeriod" class="form-control">
                  <option value="7">7 days</option>
                  <option value="14">14 days</option>
                  <option value="30" selected>30 days</option>
                  <option value="90">90 days</option>
                  <option value="365">1 year</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="backupDestination">Backup Destination</label>
              <div class="checkbox-container" style="margin-top: 10px">
                <input type="checkbox" id="localStorage" checked />
                <label for="localStorage">Local Server</label>

                <input
                  type="checkbox"
                  id="cloudStorage"
                  style="margin-left: 20px"
                />
                <label for="cloudStorage">Cloud Storage</label>

                <input
                  type="checkbox"
                  id="externalDrive"
                  style="margin-left: 20px"
                />
                <label for="externalDrive">External Drive</label>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn" id="clearScheduleBtn">
                Clear
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Schedule
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Backup Progress Modal -->
    <div class="modal" id="backupProgressModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="backupModalTitle">Creating Backup</h3>
          <button class="modal-close" id="closeBackupModal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="backupProgressContent">
            <p id="backupStatusMessage">Preparing backup process...</p>

            <div class="progress-container">
              <div class="progress-header">
                <span>Progress</span>
                <span id="progressPercentage">0%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>

            <div id="backupDetails" style="margin-top: 20px; display: none">
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 5px;
                "
              >
                <span>Current Table:</span>
                <span id="currentTable">-</span>
              </div>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 5px;
                "
              >
                <span>Records Processed:</span>
                <span id="recordsProcessed">0</span>
              </div>
              <div style="display: flex; justify-content: space-between">
                <span>Estimated Time:</span>
                <span id="estimatedTime">-</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Restore Backup Modal -->
    <div class="modal" id="restoreBackupModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Restore from Backup</h3>
          <button class="modal-close" id="closeRestoreModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="selectBackupFile">Select Backup File</label>
            <select id="selectBackupFile" class="form-control">
              <option value="">Choose a backup file</option>
              <!-- Backup files will be populated by JavaScript -->
            </select>
          </div>

          <div class="form-group">
            <label>Restore Options</label>
            <div class="checkbox-container" style="margin-top: 10px">
              <input type="radio" id="fullRestore" name="restoreType" checked />
              <label for="fullRestore">Full Restore (Replace all data)</label>
            </div>
            <div class="checkbox-container">
              <input type="radio" id="partialRestore" name="restoreType" />
              <label for="partialRestore"
                >Partial Restore (Select tables)</label
              >
            </div>
          </div>

          <div
            id="partialRestoreOptions"
            style="display: none; margin-top: 15px"
          >
            <label>Select Tables to Restore</label>
            <div
              style="
                max-height: 200px;
                overflow-y: auto;
                border: 1px solid #e1e8ed;
                border-radius: 5px;
                padding: 10px;
                margin-top: 10px;
              "
            >
              <!-- Tables will be populated by JavaScript -->
            </div>
          </div>

          <div class="form-group">
            <div class="checkbox-container">
              <input type="checkbox" id="backupBeforeRestore" checked />
              <label for="backupBeforeRestore"
                >Create backup before restoring</label
              >
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn" id="cancelRestoreBtn">
              Cancel
            </button>
            <button type="button" class="btn btn-danger" id="confirmRestoreBtn">
              <i class="fas fa-redo"></i> Restore Backup
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="../js/back-up.js"></script>
  </body>
</html>
